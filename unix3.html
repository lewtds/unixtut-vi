<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Hướng dẫn UNIX 3</title>

  

  
  
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  
  <meta name="Copyright" content="Michael Stonebank, 1995-2003" />

  
  <link href="unixtut2.css" rel="stylesheet" type="text/css" />

  
  <link href="unixtut2-print.css" rel="stylesheet" type="text/css" media="print" /></head><body>
<div id="container">
<h1>Hướng dẫn UNIX 3<br />
</h1>
<h2>3.1 Chuyển hướng<br />
</h2>
<p>Phần lớn các phần mềm UNIX in kết quả ra đầu ra chuẩn (standard
output, thường là in ra màn hình), và nhận dữ liệu từ đầu vào chuẩn
(standard input, thường là đọc từ bàn phím). Ngoài ra cũng có đầu ra
lỗi chuẩn (standard error, thường cũng là màn hình), là nơi các phần
mềm in ra thông báo lỗi.<br />
</p>
<p>Chúng ta đã biết một cách dùng lệnh&nbsp;<span class="command">cat</span>
để in nội dung của tập tin ra màn hình.<br />
</p>
<p>Giờ thử dùng&nbsp;<span class="command">cat</span> mà không có đối
số xem<br />
</p>
<p class="cli"> % cat</p>
<p>Hãy gõ một vài từ vào bàn phím và gõ [<span style="font-weight: bold;">Return</span>] (phím Enter).</p>
<p>Cuối cùng giữ phím [<span style="font-weight: bold;">Ctrl</span>] và
nhấn [<span style="font-weight: bold;">d</span>] (viết tắt là <span style="font-weight: bold;">^D</span>) để kết thúc nhập liệu.</p>
<p>Có chuyện gì đã xảy ra?<br />
</p>
<p>Nếu bạn chạy lệnh cat mà không đưa ra một tập tin nào cho nó đọc thì
nó sẽ đọc từ đầu vào chuẩn (bàn phím), và khi nhận được tín hiệu 'kết
thúc tập tin' (end of file, EOF, <span style="font-weight: bold;">^D</span>),
nó sẽ sao chép nội dung đó ra đầu ra chuẩn (màn hình).</p>
<p>Trong UNIX, chúng ta có thể chuyển hướng cả đầu ra lẫn đầu vào của
lệnh.</p>
<p> </p>
<h2>3.2 Chuyển hướng đầu ra<br />
</h2>
<p>Chúng ta dùng ký hiệu &gt; (lớn hơn) để chuyển hướng đầu ra của
lệnh. Ví dụ, để tạo tập tin tên là <span style="font-weight: bold;">list1</span>
chứa danh sách các loại hoa quả, bạn gõ<br />
</p>
<p class="cli">% cat &gt; list1</p>
<p>Sau đó gõ tên một vài loại hoa quả. Nhấn [<span style="font-weight: bold;">Return</span>] khi muốn xuống dòng.</p>
<p class="cli">lê<br />
chuối<br />
táo<br />
^D {tức là gõ [Ctrl] và [d] để kết thúc}</p>
<p>Lệnh&nbsp;<span class="command">cat</span> đọc từ đầu vào chuẩn (bàn
phím) và dấu &gt; chuyển hướng đầu ra (thường là màn hình) vào một tập
tin là <span style="font-weight: bold;">list1</span><br />
</p>
<p>Để đọc nội dung của tập tin này, bạn gõ<br />
</p>
<p class="cli">% cat list1</p>
<h3>Bài tập 3a</h3>
<p>Sử dụng phương pháp trên, tạo một tập tin khác tên là list2 chứa
những loại hoa quả sau: cam, đào, xoài, nho. Đọc nội dung của <span style="font-weight: bold;">list2</span><br />
</p>
<h3>3.2.1 Ghi thêm vào cuối tập tin<br />
</h3>
<p>Ký tự &gt;&gt; chuyển hướng đầu ra chuẩn vào cuối tập tin. Vậy để
thêm nhiều mục hơn cho tập tin <span style="font-weight: bold;">list1</span>,
bạn gõ<br />
</p>
<p class="cli"> % cat &gt;&gt; list1</p>
<p>Sau đó gõ thêm nhiều tên hoa quả nữa<br />
</p>
<p class="cli"> đào<br />
nho<br />
cam<br />
^D (để dừng lại)</p>
<p>Để đọc nội dung của nó, bạn gõ</p>
<p class="cli"> % cat list1</p>
<p>Bạn sẽ có 2 tập tin. <span style="font-weight: bold;">list1</span>
chứa 6 loại quả, <span style="font-weight: bold;">list2</span> chứa 4
loại quả.</p>
<p>Chúng ta sẽ sử dụng lệnh&nbsp;<span class="command">cat</span> để
nối (concatenate, móc nối) <span style="font-weight: bold;">list1</span>
và <span style="font-weight: bold;">list2</span> thành một tập tin mới
tên là <span style="font-weight: bold;">biglist</span>. Bạn gõ</p>
<p class="cli"> % cat list1 list2 &gt; biglist</p>
<p>Lệnh này đọc lần lượt nội dung của <span style="font-weight: bold;">list1</span>
và <span style="font-weight: bold;">list2</span>, sau đó in ra tập tin
<span style="font-weight: bold;">biglist</span></p>
<p>Để kiểm tra, bạn gõ<br />
</p>
<p class="cli"> % cat biglist</p>
<h2>3.3 Chuyển hướng đầu vào<br />
</h2>
<p>Chúng ta dùng ký tự &lt; để chuyển hướng đầu vào của lệnh.<br />
</p>
<p>Lệnh&nbsp;<span class="command">sort</span> sẽ sắp xếp một danh sách
theo vần abc. Bạn gõ<br />
</p>
<p class="cli"> % sort</p>
<p>Sau đó gõ tên một số loài động vật. Gõ [<span style="font-weight: bold;">Return</span>] sau mỗi con.</p>
<p class="cli">chó<br />
mèo<br />
chim<br />
khỉ<br />
^D</p>
<p>Kết quả in ra sẽ là<br />
</p>
<p class="output">chim<br />
chó<br />
khỉ<br />
mèo<br />
</p>
<p>Sử dụng dấu &lt; bạn có thể chuyển hướng đầu vào từ một tập tin thay
vì bàn phím. Ví dụ, để sắp xếp danh sách hoa quả, bạn gõ<br />
</p>
<p class="cli"> % sort &lt; biglist</p>
<p>và sẽ nhận được danh sách hoa quả đã được sắp xếp.</p>
<p>Để in ra danh sách đã được sắp xếp<br />
</p>
<p class="cli"> % sort &lt; biglist &gt; slist </p>
<p>Kiểm tra bằng lệnh <span class="command">cat</span></p>
<h2>3.4 Ống dẫn<br />
</h2>
<p>Để xem ai đang đăng nhập cùng với bạn, gõ<br />
</p>
<p class="cli"> % who <br />
</p>
<p class="hint">Ghi chú: trong hệ thống UNIX dùng cho máy tính cá nhân
thường chỉ có một mình bạn đăng nhập, thử mở thêm một vài cửa sổ dòng
lệnh hoặc tạo thêm tài khoản nữa xem.<br />

</p>
<p>Dưới đây là một cách để in ra danh sách đã sắp xếp<br />
 </p>

<p class="cli"> % who &gt; names.txt<br />
% sort &lt; names.txt </p>
<p>Cách này hơi lằng nhằng và bạn phải nhớ xóa tập tin tạm (<span style="font-weight: bold;">names.txt</span>)
đi sau khi kết thúc. Bạn sẽ muốn kết nối đầu ra của lệnh who trực tiếp
với đầu vào của lệnh sort. Đây chính là công dụng của ống dẫn. Ký hiệu
cho ống dẫn là dấu gạch thẳng |<br />
 </p>

<p>Ví dụ<br />
 </p>

<p class="cli"> % who | sort</p>
<p>lệnh này sẽ cho kết quả như trên, nhưng nhanh hơn và sạch sẽ hơn.</p>
<p>Để biết được có bao nhiêu người đang cùng đăng nhập, bạn gõ</p>

<p class="cli"> % who | wc -l</p>
<h3>Bài tập 3b</h3>
<p>Sử dụng ống dẫn, hiển thị tất cả các dòng trong <span style="font-weight: bold;">list1</span> và <span style="font-weight: bold;">list2</span> có chứa chữ 'h' và sắp xếp kết quả.</p>

<p><a href="pipeanswer.html">Đáp án ở đây<br />
</a></p>
<h2>Tổng kết<br />
</h2>
<table align="center" border="1" cellpadding="5" cellspacing="0">
  <tbody>
    <tr>
      <th>Lệnh</th>
      <th>Ý nghĩa<br />
      </th>
    </tr>
    <tr>
      <td class="command"><var>command</var> &gt; <var>file</var></td>
      <td>chuyển hướng đầu ra chuẩn ra tập tin<br />
      </td>
    </tr>
    <tr>
      <td class="command"><var>command</var> &gt;&gt; <var>file</var></td>
      <td>chuyển hướng đầu ra chuẩn vào cuối tập tin<br />
      </td>
    </tr>
    <tr>
      <td class="command"><var>command</var> &lt; <var>file</var></td>
      <td>chuyển hướng đầu vào chuẩn từ tập tin<br />
      </td>
    </tr>
    <tr>
      <td class="command"><var>command1</var> | <var>command2</var></td>
      <td>tạo ống dẫn đầu ra lệnh 1 vào đầu vào lệnh 2<br />
      </td>
    </tr>
    <tr>
      <td class="command">cat <var>file1 file2</var> &gt; <var>file0</var></td>
      <td>ghép file1, file2 và dẫn ra file0<br />
      </td>
    </tr>
    <tr>
      <td class="command">sort</td>
      <td>sắp xếp dữ liệu<br />
      </td>
    </tr>
    <tr>
      <td class="command">who</td>
      <td>liệt kê những người dùng đang đăng nhập<br />
      </td>
    </tr>
  </tbody>
</table>
<p align="center"><a href="unix1.html"><img src="media/left.gif" alt="Previous" border="0" height="39" width="37" /></a> <a href="index.html"><img src="media/home.gif" alt="Home" border="0" height="39" width="81" /></a><a href="unix3.html"><img src="media/right.gif" alt="Next" border="0" height="39" width="37" /></a></p>
<p class="date">M.Stonebank@surrey.ac.uk, © 9th October 2000 </p>
</div>

</body></html>